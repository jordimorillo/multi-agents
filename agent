#!/bin/bash
# Script para ejecutar el sistema multi-agente

# Colores para output
GREEN='\033[0;32m'
BLUE='\033[0;34m'
RED='\033[0;31m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# Directorio del script
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
cd "$SCRIPT_DIR"

# Verificar que existe el venv
if [ ! -d "venv" ]; then
    echo -e "${RED}âŒ Error: Virtual environment no encontrado${NC}"
    echo "   Ejecuta primero: ./setup.sh"
    exit 1
fi

# Activar entorno virtual
source venv/bin/activate

# Si no hay argumentos, mostrar ayuda
if [ $# -eq 0 ]; then
    echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
    echo -e "${GREEN}ğŸ¤– SISTEMA MULTI-AGENTE${NC}"
    echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
    echo ""
    echo -e "${YELLOW}Uso:${NC}"
    echo "  ./agent \"<tu orden aquÃ­>\""
    echo ""
    echo -e "${YELLOW}Ejemplos:${NC}"
    echo "  ./agent \"Implementar traducciones a catalÃ¡n e inglÃ©s\""
    echo "  ./agent \"AÃ±adir autenticaciÃ³n OAuth\""
    echo "  ./agent \"Optimizar performance del frontend\""
    echo "  ./agent \"Crear sistema de comentarios\""
    echo ""
    echo -e "${YELLOW}Agentes disponibles:${NC}"
    echo "  ğŸ“ @fullstack-architect  - CoordinaciÃ³n y arquitectura"
    echo "  ğŸ’» @frontend-specialist  - Desarrollo frontend"
    echo "  ğŸ”§ @backend-specialist   - Desarrollo backend"
    echo "  ğŸ›¡ï¸  @security-specialist  - Seguridad y auditorÃ­as"
    echo "  âš¡ @performance-specialist - OptimizaciÃ³n"
    echo "  âœ… @qa-specialist        - Testing y calidad"
    echo "  ğŸ” @observer-optimizer   - AnÃ¡lisis y mejora continua"
    echo ""
    echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
    exit 0
fi

# Ejecutar el CLI con el prompt del usuario
echo -e "${GREEN}ğŸš€ Iniciando sistema multi-agente...${NC}"
echo ""

python cli.py "$@"

# Capturar cÃ³digo de salida
EXIT_CODE=$?

if [ $EXIT_CODE -eq 0 ]; then
    echo ""
    echo -e "${GREEN}âœ… EjecuciÃ³n completada exitosamente${NC}"
else
    echo ""
    echo -e "${RED}âŒ Error en la ejecuciÃ³n (cÃ³digo: $EXIT_CODE)${NC}"
fi

exit $EXIT_CODE
